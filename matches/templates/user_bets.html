{% extends 'base.html' %}

{% load static %}

{% load competition_filters %}

{% block extra_head %}
    <link href="{% static 'competitions.css' %}" rel="stylesheet">
    <script src="{% static 'user_bets.js' %}"></script>
{% endblock extra_head %}

{% block extra_nav %}
    <button type="button" class="btn btn-sm btn-success" id="save_bets">Save</button>
{% endblock extra_nav %}

{% block body %}
    {% if messages %}
                        {% for message in messages %}
                            {% if message.extra_tags == 'saved' %}
                                <div class="saved_alert alert alert-success {{ message.tags }}">{{ message }}</div>
                            {% endif %}
                        {% endfor %}
    {% endif %}

    <form action="{% url 'user_bets' %}" method="POST">
        {% csrf_token %}
        <table id="bets_table">
        {% for match in matches %}
            <tr class="match">
                <td class="date">{{ match.datetime|date:"d.m.Y" }}</td>
                <td class="time">{{ match.datetime|date:"H:i" }}</td>
                <td class="home_team">{{ match.home_team }}</td>
                <td class="away_team">{{ match.away_team }}</td>
                <td class="bet">
                    {% if match|get_property:'in_future' %}
                        <input name="match_{{ match.id }}" value="{{ match.bet|default_if_none:'' }}">
                    {% else %}
                        {{ match.bet|default_if_none:'' }}
                    {% endif %}

                    {% if messages %}
                        {% for message in messages %}
                            {% if message.extra_tags == match.id|stringformat:"s" %}
                                <div class="{{ message.tags }}">{{ message }}</div>
                            {% endif %}
                        {% endfor %}
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
        </table>
    </form>
{% endblock %}

