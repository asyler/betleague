{% extends 'base.html' %}

{% load competition_filters %}

{% block body %}
    <div class="container-fluid" id="results_table">
        <div class="row" id="users">
            <div class="col-fixed"></div>
            {% for user in users %}
                <div class="col-equal username">{{ user.username }}</div>
            {% endfor %}
        </div>
        <div class="row" id="total">
            <div class="col-fixed"></div>
            {% for user in users %}
                <div class="col-equal points">{{ user.total_points }}</div>
            {% endfor %}
        </div>
        {% for match in matches.values %}
            <div class="row match">
                <div class="row match-info col-fixed">
                    <div class="col-limited date">{{ match.datetime|date:"d.m.Y" }}</div>
                    <div class="col-limited time">{{ match.datetime|date:"H:i" }}</div>
                    <div class="col-equal home_team">{{ match.home_team }}</div>
                    <div class="col-equal away_team">{{ match.away_team }}</div>
                </div>
                {% for user in users %}
                    {% if match.has_result %}
                        <div class="col-equal bet_result">
                            {{ match.bets|get_item:user.pk|get_property:'result'|default_if_none:'' }}
                        </div>
                    {% else %}
                        <div class="col-equal bet">
                            {{ match.bets|get_item:user.pk|default_if_none:'' }}
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
        {% endfor %}
    </div>
{% endblock %}